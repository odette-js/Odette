!function(n){var e=n.Odette=n.Odette||function(n,t,r,i,o){"use strict";function s(n,e){return this.SCOPED=g,this.CREATED_AT=m(),this.VERSION=n,this.application=this,this.missedDefinitions=[],this}var u,c=e.VERSION="0.0.0",a="",f="length",h="global",p="prototype",d=".",l=this||window||this,v=l.document,g=!0,y=!1,O=null,E=function(){},V=function(n){return function(e){return typeof e===n}},m=function(){return+new Date},S=function(n,e){for(var t=0,r=n.slice(0),i=r[f],o=[];i>t;)o[t]=e(r[t],t,r),t++;return o},w=V("string"),R=V("number"),x=V("function"),C=V("object"),A=function(n){return Array.isArray(n)},I=m(),D=function(n,e){return function(){return e.apply(n,arguments)}},T=function(n,e,t){var r,i=O;try{r=n()}catch(o){i=o,r=e?e(o,r):r}finally{r=t?t(i,r):r}return r},N=function(n,e){var t,r,i,o=H(n),s=H(e);return o===g?g:s===g?g:o===y&&s===y?(t=n.split(d),r=e.split(d),S(t,function(n,e){+n<+(r[e]||0)&&(i=g)}),1===t[f]&&3===r[f]?g:3===t[f]&&1===r[f]?y:(i===u&&r[f]>t[f]&&(i=g),!!i)):e>=n},b=function(n){return function(){return n}},q=function(n){var e=n.url,t=[];return C(n)?(each(n.query,function(n,e){n!==u&&(n=encodeURIComponent(stringify(n)),t.push(e+"="+n))}),t[f]&&(e+="?"),e+=t.join("&"),n.hash&&(n.hash=C(n.hash)?encodeURI(stringify(n.hash)):hash,e+="#"+n.hash)):e=n,e},H=function(n){var e,t=n;return R(t)?t:(t+=a,e=+t,e===e?e:1===t.split(d)[f])},W=function(n){var e,t,r,i,o,s=0,u=n,c=l.decodeURIComponent;for(w(u)||(u=u[LOCATION].search),"?"===u[0]&&(u=u.slice(1)),r=u.split("&"),e={};s<r[f];s++)t=r[s].split("="),t[0]&&(t[f]<2&&t[PUSH](a),i=t[1],i=c(i),"'"!==i[0]&&'"'!==i[0]||(i=i.slice(1,i[f]-1)),i===g+a&&(i=g),i===y+a&&(i=y),w(i)&&(o=+i,o==i&&o+a===i&&(i=o)),e[c(t[0])]=i);return e},U=function(n){throw new Error(n)};s[p].extend=function(n){return this.merge(this,n)},s[p].merge=function(n,e){return this.each(e,function(e,t){n[t]=e}),n},s[p].each=function(n,e,t){var r,i,o=n;if(C(o))if(A(o))S(o,e);else{i=[];for(r in o)o.hasOwnProperty(r)&&i.push(r);S(i,function(n){e.apply(t||this,[o[n],n,o])})}return o},s[p].extend({exception:U,destroy:E,wraptry:T,now:m,stringifyQuery:q,parseSearch:W,undefine:function(n){return this.missedDefinitions.push(n),this.defining&&n.apply(this,[this,this.definingAgainst,this.definingWith]),this},parody:function(n){for(var e=this,t=0,r={},i=e[h];t<n[f];t++)r[n[t]]=D(i,i[n[t]]);return e.extend(r),e},scope:function(n,e){var t=n&&w(n)?n:this.VERSION,r=n&&(x(n)?n:x(e)?e:O);return this[h].scope(t,r)},counter:function(n){return e.counter(n)}});var j,P=function(n,e){var t={};return function(r){var i,o=r||E,s=n,u=this,c=this.global,a=c.buildContext,f=function(){i.queue.push(h)},h={app:u,context:a,handler:o};return w(s)&&(s=b(s)),(s=s(u))?(i=t[s]=t[s]||{},i.finished?(e.apply(c,[h]),o.apply(h,[u])):i.loading?f():(i.queue=[],i.loading=g,f(),c.makeScript(s,function(){var n=i.queue.slice(0);i.loading=y,i.finished=g,i.queue=[],c.registerVersion(u.VERSION),c.map(n,function(n){e.apply(c,[n]),n.handler(n.app)})},a.document)),i.queue):y}},k=l[t]=l[t]||function(){return e.where.push(t),{Application:s,EXECUTED_AT:I,WHERE:t,VERSION:c,SHARED:g,SCOPED:y,versionOrder:[],versions:{},wraptry:T,maxVersion:N,map:S,loadScriptWithQueue:P,registerVersion:function(n,e){var t=this,r=t.versions[n],i=t.versions[n]=r||e||new s(n,t);return i[h]=t,t.currentVersion=n,t.defaultVersion=t.maxVersion(t.defaultVersion,n)?n:t.defaultVersion,r||t.versionOrder.push(n),i},definition:function(n,e,t){var r,i,o,s,u,c=this,a=n,f=e,h=t;return C(a)&&(h=f,f=a,a=c.scope().VERSION),r=c.registerVersion(a),i=f.Odette,(o=i.options)?(u=f||o.context,s=h||{},r.defined?c.map(r.missedDefinitions,function(n){n.apply(r,[r,u,s])}):(r.defined=g,r.defining=g,r.definingAgainst=u,r.definingWith=s,o.handler.apply(r,[r,u,s]),r.defining=y,delete i.options),r):r},unRegisterVersion:function(n){var e=this,t=e.versions[n],r=e.versionOrder.indexOf(n);return-1===r?e:(t.destroy(),e.versionOrder.splice(r,1),t[h]=u,e.versions[n]=u,t)},scope:function(n,e){var t,r,i,o=this,s=o.versions;return w(n)||R(n)?(t=n,r=e):(r=n,t=o.defaultVersion),s[t]?o.currentVersion=t:o.registerVersion(t),i=s[t],x(r)?(r.apply(o,[i]),i):i},registerScopedMethod:function(n,e){var t=this,r=e||3;t[n]=t[n]||function(){var e=0,i=arguments,o=i,s=i[f],u=i[0];if(r>s)u=t.currentVersion;else{for(o=[];e<i[f];e++)o.push(i[e]);u=o.shift()}t.applyTo(u,n,o)};return t},get:function(n){return this.versions[n]},applyTo:function(n,e,t){var r=this,i=r.get(n);return i&&i[e]&&i[e].apply(i,t)},getCurrentScript:function(n){var e=(n||v).scripts,t=n.currentScript,r=e[e[f]-1];return t||r},touch:function(n,e,r){var i=this,o=i;return T(function(){var n=e.document;return o=e&&e[t]||o,!!n},function(){return y})?(e[t]=o,-1===e.Odette.where.indexOf(o.WHERE)&&e.Odette.where.push(o.WHERE),r||n[t]===o||(n[t]=o,S(i.versionOrder,function(n){o.registerVersion(n,i.versions[n])})),o):void 0},makeScript:function(n,e,t,r){var i=t||v,o=i.createElement("script");return o.type="text/javascript",r||i.head.appendChild(o),n&&(e&&(o.onload=e),w(n)?o.src=n:o.innerHTML=n.join("\n")),o}}}();return k.buildContext=n,j=k.get(r),j||(j=k.registerVersion(r),i.apply(l,[k,j])),o&&o.apply(l,[k,j]),j};e.where=e.where||[],e.counter=e.counter||function(){var n={},e=0;return function(t){var r;return t?(n[t]=n[t]||0,++n[t],r=n[t]):(++e,r=e),t?t+r:r}}(),e.definition=e.definition||function(n,e){this.options={context:n,handler:e}}}(this);