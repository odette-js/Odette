!function(n){var t=n.Odette=n.Odette||function(n,e,r,i,o){"use strict";function s(n,t){return this.SCOPED=y,this.CREATED_AT=m(),this.VERSION=n,this.application=this,this.missedDefinitions=[],this}var u,c=t.VERSION="0.0.0",a="",f="length",h="global",p="prototype",d=".",l=this||window||this,v=l.document,y=!0,g=!1,E=null,V=function(){},O=function(n){return function(t){return typeof t===n}},m=function(){return+new Date},w=function(n,t){for(var e=0,r=n.slice(0),i=r[f],o=[];i>e;)o[e]=t(r[e],e,r),e++;return o},S=O("string"),x=O("number"),R=O("function"),A=O("object"),C=function(n){return Array.isArray(n)},D=m(),I=function(n,t){return function(){return t.apply(n,arguments)}},T=function(n,t,e){var r,i=E;try{r=n()}catch(o){i=o,r=t?t(o,r):r}finally{r=e?e(i,r):r}return r},b=function(n,t){var e,r,i,o=W(n),s=W(t);return o===y?o:s===y?s:o===g&&s===g?(e=n.split(d),r=t.split(d),w(e,function(n,t){+n<+(r[t]||0)&&(i=y)}),i===u&&r[f]>e[f]&&(i=y),i?t:n):n>t?n:t},N=function(n){var t=n.url,e=[];return A(n)?(each(n.query,function(n,t){n!==u&&(n=encodeURIComponent(stringify(n)),e.push(t+"="+n))}),e[f]&&(t+="?"),t+=e.join("&"),n.hash&&(n.hash=A(n.hash)?encodeURI(stringify(n.hash)):hash,t+="#"+n.hash)):t=n,t},W=function(n){var t,e=n;return x(e)?e:(e+=a,t=+e,t===t?t:1===e.split(d)[f])},H=function(n){throw new Error(n)};s[p].exception=H,s[p].destroy=V,s[p].wraptry=T,s[p].now=m,s[p].extend=function(n){return this.merge(this,n)},s[p].merge=function(n,t){return this.each(t,function(t,e){n[e]=t}),n},s[p].each=function(n,t,e){var r,i,o=n;if(A(o))if(C(o))w(o,t);else{i=[];for(r in o)o.hasOwnProperty(r)&&i.push(r);w(i,function(n){t.apply(e||this,[o[n],n,o])})}return o},s[p].extend({stringifyQuery:N,undefine:function(n){return this.missedDefinitions.push(n),this.defining&&n.apply(this,[this,this.definingAgainst,this.definingWith]),this},parody:function(n){for(var t=this,e=0,r={},i=t[h];e<n[f];e++)r[n[e]]=I(i,i[n[e]]);return t.extend(r),t},scope:function(n,t){var e=n&&S(n)?n:this.VERSION,r=n&&(R(n)?n:R(t)?t:E);return this[h].scope(e,r)},counter:function(n){return t.counter(n)}});var j,P=function(n,t){var e,r,i=[];return function(o){var s=o||V,u=this,c=this.global,a=c.buildContext,f=function(){i.push(h)},h={app:u,context:a,handler:function(n){s(n)}};return r?(t.apply(c,[h]),s.apply(h,[u])):e?f():(e=y,f(),c.makeScript(n,function(){var n=i.slice(0);e=g,r=y,i=[],c.registerVersion(u.VERSION),c.map(n,function(n){t.apply(c,[n]),n.handler(n.app)})},a.document)),i}},U=l[e]=l[e]||function(){return t.where.push(e),{Application:s,EXECUTED_AT:D,WHERE:e,VERSION:c,SHARED:y,SCOPED:g,versionOrder:[],versions:{},wraptry:T,maxVersion:b,map:w,loadScriptWithQueue:P,registerVersion:function(n,t){var e=this,r=e.versions[n],i=e.versions[n]=r||t||new s(n,e);return i[h]=e,e.currentVersion=n,e.defaultVersion=e.maxVersion(e.defaultVersion,n)?n:e.defaultVersion,r||e.versionOrder.push(n),i},definition:function(n,t,e){var r,i,o,s,u,c=this,a=n,f=t,h=e;return A(a)&&(h=f,f=a,a=c.scope().VERSION),r=c.registerVersion(a),i=f.Odette,(o=i.options)?(u=f||o.context,s=h||{},r.defined?c.map(r.missedDefinitions,function(n){n.apply(r,[r,u,s])}):(r.defined=y,r.defining=y,r.definingAgainst=u,r.definingWith=s,o.handler.apply(r,[r,u,s]),r.defining=g,delete i.options),r):r},unRegisterVersion:function(n){var t=this,e=t.versions[n],r=t.versionOrder.indexOf(n);return-1===r?t:(e.destroy(),t.versionOrder.splice(r,1),e[h]=u,t.versions[n]=u,e)},scope:function(n,t){var e,r,i,o=this,s=o.versions;return S(n)||x(n)?(e=n,r=t):(r=n,e=o.defaultVersion),s[e]?o.currentVersion=e:o.registerVersion(e),i=s[e],R(r)?(r.apply(o,[i]),i):i},registerScopedMethod:function(n,t){var e=this,r=t||3;e[n]=e[n]||function(){var t=0,i=arguments,o=i,s=i[f],u=i[0];if(r>s)u=e.currentVersion;else{for(o=[];t<i[f];t++)o.push(i[t]);u=o.shift()}e.applyTo(u,n,o)};return e},get:function(n){return this.versions[n]},applyTo:function(n,t,e){var r=this,i=r.get(n);return i&&i[t]&&i[t].apply(i,e)},getCurrentScript:function(n){var t=(n||v).scripts,e=n.currentScript,r=t[t[f]-1];return e||r},touch:function(n,t,r){var i=this,o=i;return T(function(){var n=t.document;return o=t&&t[e]||o,!!n},function(){return g})?(t[e]=o,-1===t.Odette.where.indexOf(o.WHERE)&&t.Odette.where.push(o.WHERE),r||n[e]===o||(n[e]=o,w(i.versionOrder,function(n){o.registerVersion(n,i.versions[n])})),o):void 0},makeScript:function(n,t,e,r){var i=e||v,o=i.createElement("script");return o.type="text/javascript",r||i.head.appendChild(o),n&&(t&&(o.onload=t),S(n)?o.src=n:o.innerHTML=n.join("\n")),o}}}();return U.buildContext=n,j=U.get(r),j||(j=U.registerVersion(r),i.apply(l,[U,j])),o&&o.apply(l,[U,j]),j};t.where=t.where||[],t.counter=t.counter||function(){var n={},t=0;return function(e){var r;return e?(n[e]=n[e]||0,++n[e],r=n[e]):(++t,r=t),e?e+r:r}}(),t.definition=t.definition||function(n,t){this.options={context:n,handler:t}}}(this);