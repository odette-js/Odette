!function(n){var t=n.Odette=n.Odette||function(n,r,e,i,o){"use strict";function s(n,t){return this.SCOPED=y,this.CREATED_AT=m(),this.VERSION=n,this.application=this,this.missedDefinitions=[],this}var u,c=t.VERSION="0.0.0",a="",f="length",p="global",h="prototype",d=".",l=this||window||this,v=l.document,y=!0,g=!1,V=null,E=function(){},O=function(n){return function(t){return typeof t===n}},m=function(){return+new Date},S=function(n,t){for(var r=0,e=n[f],i=[];e>r;)i[r]=t(n[r],r,n),r++;return i},w=O("string"),x=O("number"),R=O("function"),b=O("object"),A=function(n){return Array.isArray(n)},D=m(),C=function(n,t){return function(){return t.apply(n,arguments)}},I=function(n,t,r){var e,i=V;try{e=n()}catch(o){i=o,e=t?t(o,e):e}finally{e=r?r(i,e):e}return e},N=function(n,t){var r,e,i,o=T(n),s=T(t);return o===y?o:s===y?s:o===g&&s===g?(r=n.split(d),e=t.split(d),S(r,function(n,t){+n<+(e[t]||0)&&(i=y)}),i===u&&e[f]>r[f]&&(i=y),i?t:n):n>t?n:t},T=function(n){var t,r=n;return x(r)?r:(r+=a,t=+r,t===t?t:1===r.split(d)[f])},W=function(n){throw new Error(n)};s[h].exception=W,s[h].destroy=E,s[h].wraptry=I,s[h].now=m,s[h].extend=function(n){return this.merge(this,n)},s[h].merge=function(n,t){return this.each(t,function(t,r){n[r]=t}),n},s[h].each=function(n,t,r){var e,i,o=n;if(b(o))if(A(o))for(o=o.slice(0);e<o[f];e++)t.apply(r||this,[o[e],e,o]);else{i=[];for(e in o)o.hasOwnProperty(e)&&i.push(e);this.each(i,function(n){t.apply(r||this,[o[n],n,o])})}return o},s[h].undefine=function(n){return this.missedDefinitions.push(n),this.defining&&n.apply(this,[this,this.definingAgainst,this.definingWith]),this},s[h].parody=function(n){for(var t=this,r=0,e={},i=t[p];r<n[f];r++)e[n[r]]=C(i,i[n[r]]);return t.extend(e),t},s[h].scope=function(n,t){var r=n&&w(n)?n:this.VERSION,e=n&&(R(n)?n:R(t)?t:V);return this[p].scope(r,e)},s[h].counter=function(n){return t.counter(n)},s[h].libraryUrl=function(){return"./library.js"},s[h].loadLibrary=function(n){return this[p].loadLibrary(this,this.libraryUrl(),n)};var H,j=function(n){var t,r=[];return function(e,i,o){var u,c,a,f=e,p=this,d=function(){r.push(c)};if(w(e)&&(f=p.get(e)),f||s[h].exception("Application must have been created already."),p.defined)return o&&o(f);if(u=p.buildContext,c={app:f,context:u,handler:function(n){o(n)}},t)d();else{if(!w(i))return p.registerVersion(f.VERSION),n.apply(p,[c]),f=o&&o(f),a;t=y,d(),p.makeScript(i,function(){t=g,r=[],p.registerVersion(f.VERSION),p.map(r,function(t){return n.apply(p,[t]),t.handler&&t.handler(t.app)})},u.document)}}},L=l[r]=l[r]||function(){return t.where.push(r),{Application:s,EXECUTED_AT:D,WHERE:r,VERSION:c,SHARED:y,SCOPED:g,versionOrder:[],versions:{},wraptry:I,maxVersion:N,map:S,loadScriptWithQueue:j,registerVersion:function(n,t){var r=this,e=r.versions[n],i=r.versions[n]=e||t||new s(n,r);return i[p]=r,r.currentVersion=n,r.defaultVersion=r.maxVersion(r.defaultVersion,n)?n:r.defaultVersion,e||r.versionOrder.push(n),i},definition:function(n,t,r){var e,i,o,s,u,c=this,a=n,f=t,p=r;return b(a)&&(p=f,f=a,a=c.scope().VERSION),e=c.registerVersion(a),i=f.Odette,(o=i.options)?(u=f||o.context,s=p||{},e.defined?c.map(e.missedDefinitions,function(n){n.apply(e,[e,u,s])}):(e.defined=y,e.defining=y,e.definingAgainst=u,e.definingWith=s,o.handler.apply(e,[e,u,s]),e.defining=g,delete i.options),e):e},unRegisterVersion:function(n){var t=this,r=t.versions[n],e=t.versionOrder.indexOf(n);return-1===e?t:(r.destroy(),t.versionOrder.splice(e,1),r[p]=u,t.versions[n]=u,r)},scope:function(n,t){var r,e,i,o=this,s=o.versions;return w(n)||x(n)?(r=n,e=t):(e=n,r=o.defaultVersion),s[r]?o.currentVersion=r:o.registerVersion(r),i=s[r],R(e)?(e.apply(o,[i]),i):i},registerScopedMethod:function(n,t){var r=this,e=t||3;r[n]=r[n]||function(){var t=0,i=arguments,o=i,s=i[f],u=i[0];if(e>s)u=r.currentVersion;else{for(o=[];t<i[f];t++)o.push(i[t]);u=o.shift()}r.applyTo(u,n,o)};return r},get:function(n){return this.versions[n]},applyTo:function(n,t,r){var e=this,i=e.get(n);return i&&i[t]&&i[t].apply(i,r)},getCurrentScript:function(n){var t=(n||v).scripts,r=n.currentScript,e=t[t[f]-1];return r||e},touch:function(n,t,e){var i=this,o=i;return I(function(){var n=t.document;return o=t&&t[r]||o,!!n},function(){return g})?(t[r]=o,-1===t.Odette.where.indexOf(o.WHERE)&&t.Odette.where.push(o.WHERE),e||n[r]===o||(n[r]=o,S(i.versionOrder,function(n){o.registerVersion(n,i.versions[n])})),o):void 0},makeScript:function(n,t,r,e){var i=r||v,o=i.createElement("script");return o.type="text/javascript",e||i.head.appendChild(o),n&&(t&&(o.onload=t),w(n)?o.src=n:o.innerHTML=n.join("\n")),o},loadLibrary:j(function(n){this.definition(n.context)})}}();return L.buildContext=n,H=L.get(e),H||(H=L.registerVersion(e),i.apply(l,[L,H])),o&&o.apply(l,[L,H]),H};t.where=t.where||[],t.counter=t.counter||function(){var n={},t=0;return function(r){var e;return r?(n[r]=n[r]||0,++n[r],e=n[r]):(++t,e=t),r?r+e:e}}(),t.definition=t.definition||function(n,t){this.options={context:n,handler:t}}}(this);