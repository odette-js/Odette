!function(n){var t=n.Odette=n.Odette||function(n,r,i,e,o){"use strict";function s(n,t){return this.SCOPED=y,this.CREATED_AT=b(),this.VERSION=n,this.application=this,this.missedDefinitions=[],this}var u,a=t.VERSION="0.0.0",c="",f="length",p="global",d="prototype",h=".",l=this||window||this,v=l.document,y=!0,g=!1,E=null,O=function(){},V=function(n){return function(t){return typeof t===n}},b=function(){return+new Date},m=function(n,t){for(var r=0,i=n[f],e=[];i>r;)e[r]=t(n[r],r,n),r++;return e},w=V("string"),x=V("number"),S=V("function"),R=V("object"),D=b(),A=function(n,t){return function(){return t.apply(n,arguments)}},C=function(n,t,r){var i,e=E;try{i=n()}catch(o){e=o,i=t?t(o,i):i}finally{i=r?r(e,i):i}return i},L=function(n,t){var r,i,e,o=T(n),s=T(t);return o===y?o:s===y?s:o===g&&s===g?(r=n.split(h),i=t.split(h),m(r,function(n,t){+n<+(i[t]||0)&&(e=y)}),e===u&&i[f]>r[f]&&(e=y),e?t:n):n>t?n:t},T=function(n){var t,r=n;return x(r)?r:(r+=c,t=+r,t===t?t:1===r.split(h)[f])},W=function(n){throw new Error(n)};s[d].exception=W,s[d].destroy=O,s[d].wraptry=C,s[d].now=b,s[d].extend=function(n){var t,r=this;for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},s[d].undefine=function(n){return this.missedDefinitions.push(n),this.defining&&n.apply(this,[this,this.definingAgainst,this.definingWith]),this},s[d].parody=function(n){for(var t=this,r=0,i={},e=t[p];r<n[f];r++)i[n[r]]=A(e,e[n[r]]);return t.extend(i),t},s[d].scope=function(n,t){var r=n&&w(n)?n:this.VERSION,i=n&&(S(n)?n:S(t)?t:E);return this[p].scope(r,i)},s[d].counter=function(n){return t.counter(n)},s[d].libraryUrl=function(){return"./library.js"},s[d].loadLibrary=function(n){return this[p].loadLibrary(this,this.libraryUrl(),n)};var H,I=function(n){var t=[];return function(r,i,e){var o,u,a,c=r,f=this,p=function(){t.push(u)};if(w(r)&&(c=f.get(r)),c||s[d].exception("Application must have been created already."),f.defined)return e&&e(c);if(o=f.buildContext,u={app:c,context:o,handler:function(n){e(n)}},f.loadingLibrary)p();else{if(!w(i))return n.apply(f,[u]),c=e&&e(c),a;f.loadingLibrary=y,p(),f.makeScript(i,function(){f.loadingLibrary=g,f.waitingForLibrary=[],f.map(t,function(t){return n.apply(f,[t]),t.handler&&t.handler(t.app)})},o.document)}}},N=l[r]=l[r]||function(){return t.where.push(r),{Application:s,EXECUTED_AT:D,WHERE:r,VERSION:a,SHARED:y,SCOPED:g,versionOrder:[],versions:{},wraptry:C,maxVersion:L,map:m,loadScriptWithQueue:I,registerVersion:function(n,t){var r=this,i=r.versions[n],e=r.versions[n]=i||t||new s(n,r);return e[p]=r,r.currentVersion=n,r.defaultVersion=r.maxVersion(r.defaultVersion,n)?n:r.defaultVersion,i||r.versionOrder.push(n),e},definition:function(n,t,r){var i,e,o,s,u,a=this,c=n,f=t,p=r;return R(c)&&(p=f,f=c,c=a.scope().VERSION),i=a.registerVersion(c),e=f.Odette,(o=e.options)?(u=f||o.context,s=p||{},i.defined?a.map(i.missedDefinitions,function(n){n.apply(i,[i,u,s])}):(i.defined=y,i.defining=y,i.definingAgainst=u,i.definingWith=s,o.handler.apply(i,[i,u,s]),i.defining=g,delete e.options),i):i},unRegisterVersion:function(n){var t=this,r=t.versions[n],i=t.versionOrder.indexOf(n);return-1===i?t:(r.destroy(),t.versionOrder.splice(i,1),r[p]=u,t.versions[n]=u,r)},scope:function(n,t){var r,i,e,o=this,s=o.versions;return w(n)||x(n)?(r=n,i=t):(i=n,r=o.defaultVersion),s[r]?o.currentVersion=r:o.registerVersion(r),e=s[r],S(i)?(i.apply(o,[e]),e):e},registerScopedMethod:function(n,t){var r=this,i=t||3;r[n]=r[n]||function(){var t=0,e=arguments,o=e,s=e[f],u=e[0];if(i>s)u=r.currentVersion;else{for(o=[];t<e[f];t++)o.push(e[t]);u=o.shift()}r.applyTo(u,n,o)};return r},get:function(n){return this.versions[n]},applyTo:function(n,t,r){var i=this,e=i.get(n);return e&&e[t]&&e[t].apply(e,r)},getCurrentScript:function(n){var t=(n||v).scripts,r=n.currentScript,i=t[t[f]-1];return r||i},touch:function(n,t,i){var e=this,o=e;return C(function(){var n=t.document;return o=t&&t[r]||o,!!n},function(){return g})?(t[r]=o,-1===t.Odette.where.indexOf(o.WHERE)&&t.Odette.where.push(o.WHERE),i||n[r]===o||(n[r]=o,m(e.versionOrder,function(n){o.registerVersion(n,e.versions[n])})),o):void 0},makeScript:function(n,t,r,i){var e=r||v,o=e.createElement("script");return o.type="text/javascript",i||e.head.appendChild(o),n&&(t&&(o.onload=t),w(n)?o.src=n:o.innerHTML=n.join("\n")),o},loadLibrary:I(function(n){this.definition(n.context)})}}();return N.buildContext=n,H=N.get(i),H||(H=N.registerVersion(i),e.apply(l,[N,H])),o&&o.apply(l,[N,H]),H};t.where=t.where||[],t.counter=t.counter||function(){var n={},t=0;return function(r){var i;return r?(n[r]=n[r]||0,++n[r],i=n[r]):(++t,i=t),r?r+i:i}}(),t.definition=t.definition||function(n,t){this.options={context:n,handler:t}}}(this);